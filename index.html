<!DOCTYPE html>
<html>
<head></head>
<body>
<input type="button" id="btnImportAll" value="Import all"/>
<script src="lib/qx-oo-3.0.min.js"></script>
<script src="lib/jquery.min.js"></script>
<script src="lib/jsavaPrimitivesStubs.js"></script>
<script src="lib/javajs.js"></script>
<script>
    /*
     TODO

     - improve scripts to compile sources into one file before loading
        - non-JS script to create a linear list of imports in the correct order with no duplicates
        - compile files according to list
        - prepend the stubs file
        - optional: prepend qooxdoo file
     - write tests

     - generic types : how to verify types?
     */

    $( document ).ready( function () {
        $( '#btnImportAll' ).on( 'click', function () {
            var startTime = new Date().getTime();

            // TODO have script only write an array and then load it here
            $.getScript( 'lib/imports.js' )
                    .done( function () {
                        var cache = showCache(),
                                numberOfImportedClasses = 0;
                        for( var i in cache ) {
                            if( cache.hasOwnProperty( i ) ) {
                                numberOfImportedClasses++;
                            }
                        }

                        console.log( 'Done importing ' + numberOfImportedClasses + ' classes in '
                                + (new Date().getTime() - startTime) + 'ms.' );
                    } )
                    .fail( function () {
                        console.log( 'Error during import.' );
                        console.log( arguments );
                    } );
        } );
    } );
</script>
</body>
</html>
